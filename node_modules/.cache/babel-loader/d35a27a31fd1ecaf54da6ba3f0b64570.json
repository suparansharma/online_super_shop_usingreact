{"ast":null,"code":"var _jsxFileName = \"C:\\\\Web Development\\\\React\\\\online_super_shop_usingreact\\\\src\\\\Component\\\\Login\\\\Login.js\",\n    _s = $RefreshSig$();\n\nimport React, { useContext, useState } from 'react';\nimport { UserContext } from '../../App';\nimport { useLocation, useHistory } from 'react-router-dom';\nimport { createUserWithEmailAndPassword, handleGoogleSignIn, handleSignOut, initializeLoginFramework, signInWithEmailAndPassword } from './loginManager';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Login() {\n  _s();\n\n  const [newUser, setNewUser] = useState(false);\n  const [user, setUser] = useState({\n    isSignedIn: false,\n    name: '',\n    email: '',\n    photo: '',\n    password: '' // error : ''\n\n  });\n  initializeLoginFramework();\n  const [loggedInUser, setLoggedInUser] = useContext(UserContext);\n  const history = useHistory();\n  const location = useLocation();\n  let {\n    from\n  } = location.state || {\n    from: {\n      pathname: \"/\"\n    }\n  };\n\n  const googleSignIn = () => {\n    handleGoogleSignIn().then(res => {});\n  };\n\n  const signOut = () => {\n    handleSignOut().then(res => {\n      handleResponse(res, false);\n    });\n  };\n\n  const handleResponse = (res, redirect) => {\n    setUser(res);\n    setLoggedInUser(res);\n\n    if (redirect) {\n      history.replace(from);\n    }\n  };\n\n  const handleBlur = e => {\n    let isFormValid = true;\n\n    if (e.target.name === 'email') {\n      isFormValid = /\\S+@\\S+\\.\\S+/.test(e.target.value);\n    }\n\n    if (e.target.name === 'password') {\n      const isPasswordValid = e.target.value.length > 6;\n      const passwordHasNumber = /\\d{1}/.test(e.target.value);\n      isFormValid = isPasswordValid && passwordHasNumber;\n    }\n\n    if (isFormValid) {\n      const newUserInfo = { ...user\n      };\n      newUserInfo[e.target.name] = e.target.value;\n      setUser(newUserInfo);\n    }\n  };\n\n  const handleSubmit = e => {\n    // console.log(user.email,user.password);\n    if (newUser && user.email && user.password) {\n      createUserWithEmailAndPassword(user.name, user.email, user.password).then(res => {\n        handleResponse(res, true);\n      });\n    }\n\n    if (!newUser && user.email && user.password) {\n      signInWithEmailAndPassword(user.email, user.password).then(res => {\n        handleResponse(res, true);\n      });\n    }\n\n    e.preventDefault();\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      textAlign: 'center'\n    },\n    children: [user.isSignedIn ? /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: signOut,\n      children: \"Sign out\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 27\n    }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: googleSignIn,\n      children: \"Sign in\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 9\n    }, this), user.isSignedIn && /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Welcome \", user.name]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"email \", user.email]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n        src: user.photo,\n        alt: \"\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 28\n    }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Our own Authentication\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"checkbox\",\n      onChange: () => setNewUser(!newUser),\n      name: \"newUser\",\n      id: \"\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      htmlFor: \"newUser\",\n      children: \"New user Sign up\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      children: [newUser && /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"name\",\n        onBlur: handleBlur,\n        placeholder: \"Your name\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 20\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"email\",\n        onBlur: handleBlur,\n        placeholder: \"Your Email address\",\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"password\",\n        name: \"password\",\n        onBlur: handleBlur,\n        placeholder: \"Your Password\",\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"submit\",\n        value: newUser ? 'sign up' : 'sign in'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      style: {\n        color: 'red'\n      },\n      children: user.error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 7\n    }, this), user.success && /*#__PURE__*/_jsxDEV(\"p\", {\n      style: {\n        color: 'green'\n      },\n      children: [\"user \", newUser ? 'created' : 'Logged In', \" created\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 24\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 94,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Login, \"dB+Gxan/khBrJ2dTK/i4kO3lEck=\", false, function () {\n  return [useHistory, useLocation];\n});\n\n_c = Login;\nexport default Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"sources":["C:/Web Development/React/online_super_shop_usingreact/src/Component/Login/Login.js"],"names":["React","useContext","useState","UserContext","useLocation","useHistory","createUserWithEmailAndPassword","handleGoogleSignIn","handleSignOut","initializeLoginFramework","signInWithEmailAndPassword","Login","newUser","setNewUser","user","setUser","isSignedIn","name","email","photo","password","loggedInUser","setLoggedInUser","history","location","from","state","pathname","googleSignIn","then","res","signOut","handleResponse","redirect","replace","handleBlur","e","isFormValid","target","test","value","isPasswordValid","length","passwordHasNumber","newUserInfo","handleSubmit","preventDefault","textAlign","color","error","success"],"mappings":"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","sourcesContent":["import React, { useContext, useState } from 'react';\r\n\r\nimport  {UserContext} from '../../App';\r\nimport { useLocation,useHistory } from 'react-router-dom';\r\nimport { createUserWithEmailAndPassword, handleGoogleSignIn, handleSignOut, initializeLoginFramework, signInWithEmailAndPassword } from './loginManager';\r\n\r\n\r\n\r\nfunction Login() {\r\n  const [newUser,setNewUser]=useState(false);\r\n  \r\n  const [user,setUser] = useState({\r\n    isSignedIn : false,\r\n    name : '',\r\n    email : '', \r\n    photo : '',\r\n    password : ''\r\n    // error : ''\r\n\r\n  })\r\n  initializeLoginFramework();\r\n  const [loggedInUser, setLoggedInUser] = useContext(UserContext);\r\n  const history = useHistory();\r\n  const location = useLocation();\r\n  let { from } = location.state || { from: { pathname: \"/\" } };\r\n  \r\n  const googleSignIn = () => {\r\n      handleGoogleSignIn()\r\n      .then(res => {\r\n\r\n       \r\n        })\r\n  }\r\n\r\nconst signOut = () =>{\r\n    handleSignOut()\r\n    .then(res =>{\r\n        handleResponse(res,false);\r\n    })\r\n}\r\n \r\nconst handleResponse = (res,redirect) =>{\r\n    setUser(res);\r\n    setLoggedInUser(res);\r\n    if(redirect){\r\n        history.replace(from);\r\n    }\r\n}\r\n  const handleBlur = (e)=>{\r\n    let isFormValid = true;\r\n    if(e.target.name === 'email'){\r\n     isFormValid = /\\S+@\\S+\\.\\S+/.test(e.target.value);\r\n      \r\n    }\r\n\r\n    if(e.target.name === 'password'){\r\n      const isPasswordValid = e.target.value.length > 6;\r\n      const passwordHasNumber = /\\d{1}/.test(e.target.value);\r\n      isFormValid = isPasswordValid && passwordHasNumber ;\r\n    }\r\n\r\n    if(isFormValid){\r\n      const newUserInfo = {...user};\r\n      newUserInfo[e.target.name] = e.target.value;\r\n      setUser(newUserInfo);\r\n    }\r\n    \r\n  }\r\n\r\n  const handleSubmit = (e)=>{\r\n    // console.log(user.email,user.password);\r\n    if(newUser && user.email && user.password){\r\n        createUserWithEmailAndPassword(user.name,user.email,user.password)\r\n        .then(res => {\r\n            handleResponse(res,true);\r\n        })\r\n       \r\n    }\r\n\r\n\r\n    if(!newUser && user.email && user.password){\r\n        signInWithEmailAndPassword(user.email,user.password)\r\n        .then(res => {\r\n            handleResponse(res,true);\r\n        })\r\n    }\r\ne.preventDefault();\r\n  }\r\n\r\n  \r\n  return (\r\n    \r\n\r\n    <div style={{textAlign:'center'}}>\r\n\r\n      {\r\n        user.isSignedIn ? <button onClick={signOut}>Sign out</button>:\r\n        <button onClick={googleSignIn}>Sign in</button>\r\n      }\r\n      \r\n      {\r\n        user.isSignedIn && <div> \r\n          <p>Welcome {user.name}</p>\r\n          <p>email {user.email}</p>\r\n          <img src={user.photo} alt=\"\" />\r\n\r\n        </div>\r\n      }\r\n\r\n      <h1>Our own Authentication</h1>\r\n      {/* <p>Name: {user.name}</p>\r\n      <p>Email: {user.email}</p>\r\n      <p>Password: {user.password}</p> */}\r\n      <input type=\"checkbox\" onChange={()=>setNewUser(!newUser)} name=\"newUser\" id=\"\" />\r\n      <label htmlFor=\"newUser\">New user Sign up</label>\r\n      <form onSubmit={handleSubmit}>\r\n       {newUser && <input type=\"text\"  name=\"name\" onBlur={handleBlur} placeholder=\"Your name\"/>}\r\n        <br />\r\n        <input type=\"text\" name=\"email\" onBlur={handleBlur} placeholder=\"Your Email address\" required />\r\n        <br />\r\n        <input type=\"password\" name=\"password\" onBlur={handleBlur} placeholder=\"Your Password\" required />\r\n        <br />\r\n        <input type=\"submit\" value={newUser ? 'sign up' : 'sign in'} />\r\n      </form>\r\n      <p style={{ color:'red' }}>{user.error}</p>\r\n      {user.success && <p style={{ color:'green' }}>user { newUser ? 'created' : 'Logged In'} created</p> }\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Login;"]},"metadata":{},"sourceType":"module"}